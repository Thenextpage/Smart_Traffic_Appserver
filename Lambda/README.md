# Explamation Of The api Lambda

## Data Flow Chart

![Slide1](https://user-images.githubusercontent.com/30145956/141323497-5ba86e9b-75c4-4853-822b-974c61e464ac.jpeg)

This is the visualization of the data flow within the android application, the IOT device which is the raspberry pi, and the AWS services, mostly focused on lambda and database.

![Slide2](https://user-images.githubusercontent.com/30145956/141323723-dfe9fc20-58f4-4230-8820-9b495240a467.jpeg)

![Slide3](https://user-images.githubusercontent.com/30145956/141323717-48462f86-825e-4c20-9ad5-eaba1fbd22bc.jpeg)

These 2 slides explains the basic api of finding the users around the traffic lights. When the traffic light sends the latitude and the longitude, Lambda will check the RDS database and tries to find the user around the 0.0003 up or down latitude and the left right longitude.
Also it will check the users only if it is updated their location within 3 minuits.
If they find the user which satisfies these things, it will send the raspberry pi that there is a user.
However, since the traffic light will need to know wether the user is inside the specific rectangle location(crosswalk), we used the numpy and the matplotlib to figure out this problem. If the traffic light got the user around the signal, the light then will also use the specific 4 coordinates to know wether if the user is in the polygon.
This explamation was made before the completion, so it might have some changes with the inputs and the outputs, or other funtions such as requiring the access key generated by Cognito etc.

The other lambda functions works in similar ways, mostly updating and read data that satisfies certain aspects.
